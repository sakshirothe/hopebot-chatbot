<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale-1.0">
    <title>HopeBot (Aesthetic Redesign)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #FEFBF6; /* Soft off-white */
        }
        #chat-app {
            background: linear-gradient(180deg, #FFFBF5 0%, #F7EFE5 100%);
        }
        .font-title {
            font-family: 'Dancing Script', cursive;
        }
        .chat-container {
            height: calc(100vh - 160px);
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 8px 12px;
        }
        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 1px;
            background-color: #D1C5B4;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
            animation: 1s blink infinite .3333s;
        }
        .typing-indicator span:nth-child(2) {
            animation-delay: .6666s;
        }
        .typing-indicator span:nth-child(3) {
            animation-delay: .9999s;
        }
        @keyframes blink {
            50% {
                opacity: 1;
            }
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .read-aloud-btn, .tool-btn {
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.2s, transform 0.2s;
        }
        .read-aloud-btn:hover, .tool-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        /* Fix for dropdown option text color */
        select option {
            color: black;
        }
        .mic-btn.is-recording {
            color: #EF4444; /* Red color when recording */
        }
        .mood-emoji {
            transition: transform 0.2s ease;
        }
        .mood-emoji:hover {
            transform: scale(1.2);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div id="chat-app" class="w-full max-w-2xl mx-auto rounded-2xl shadow-2xl flex flex-col h-full max-h-[95vh]">
        <header class="bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-400 text-white p-4 rounded-t-2xl flex items-center justify-between shadow-lg">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-white/30 rounded-full flex items-center justify-center mr-4">
                    <span class="text-3xl">‚ú®</span>
                </div>
                <div>
                    <h1 class="text-3xl font-title">HopeBot</h1>
                    <p class="text-sm opacity-90">Your friendly AI companion</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <button id="call-help-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full flex items-center transition shadow">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.518.759a11.03 11.03 0 004.242 4.242l.759-1.518a1 1 0 011.06-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" /></svg>
                    Call
                </button>
                <div class="relative">
                    <select id="voice-select" class="bg-white/20 text-white rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-white">
                        <option value="default">Default Voice</option>
                        <option value="female">Female Voice</option>
                        <option value="male">Male Voice</option>
                    </select>
                </div>
                <div class="relative">
                    <select id="language-select" class="bg-white/20 text-white rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-white">
                        <option value="en">English</option>
                        <option value="es">Espa√±ol</option>
                        <option value="fr">Fran√ßais</option>
                        <option value="de">Deutsch</option>
                        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                        <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                    </select>
                </div>
            </div>
        </header>

        <div id="chat-window" class="flex-1 p-6 overflow-y-auto chat-container">
            <!-- Chat messages will be appended here -->
        </div>

        <div class="p-4 border-t border-gray-200 bg-white/50 rounded-b-2xl">
            <div class="flex items-center">
                 <button id="tools-btn" class="tool-btn mr-2 text-gray-500 hover:text-pink-400 p-2 rounded-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                </button>
                <input type="text" id="user-input" class="flex-1 px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-pink-300 transition" placeholder="Type or use mic...">
                <button id="mic-btn" class="mic-btn ml-2 text-gray-500 hover:text-gray-700 p-2 rounded-full transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                    </svg>
                </button>
                <button id="send-btn" class="ml-2 bg-gradient-to-r from-pink-400 to-purple-400 text-white px-5 py-3 rounded-full hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2 transition shadow-md">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </div>
             <p class="text-xs text-gray-500 mt-2 text-center">
                This AI is for support, not a replacement for professional advice. If you're in crisis, please call a helpline immediately.
            </p>
        </div>
    </div>

    <!-- Modals -->
    <div id="call-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-sm w-full text-center">
            <h2 class="text-2xl font-bold text-red-600 mb-4">Immediate Help Is Available</h2>
            <p class="text-gray-700 mb-6">If you are in a crisis or any other person may be in danger, please don't hesitate to call for help. You are not alone.</p>
            <a href="tel:988" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg inline-block text-lg transition">
                Call 988 Now
            </a>
            <p class="text-sm text-gray-500 mt-4">This is the National Crisis and Suicide Lifeline in the US.</p>
            <button id="close-call-modal-btn" class="mt-6 text-gray-600 hover:text-gray-800">Close</button>
        </div>
    </div>

    <div id="tools-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full">
            <div id="tools-main-view">
                <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Wellness Tools</h2>
                <!-- Mood Tracker -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">How are you feeling right now?</h3>
                    <div id="mood-tracker" class="flex justify-around">
                        <button class="text-4xl mood-emoji" data-mood="awful">üò¢</button>
                        <button class="text-4xl mood-emoji" data-mood="not great">üòï</button>
                        <button class="text-4xl mood-emoji" data-mood="okay">üòê</button>
                        <button class="text-4xl mood-emoji" data-mood="good">üôÇ</button>
                        <button class="text-4xl mood-emoji" data-mood="great">üòä</button>
                    </div>
                </div>
                <!-- Guided Exercises -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">Quick Exercises & Activities</h3>
                    <div class="space-y-2">
                        <button data-exercise="breathing" class="w-full bg-purple-100 hover:bg-purple-200 text-purple-800 font-bold py-2 px-4 rounded-lg transition">Box Breathing</button>
                        <button data-exercise="grounding" class="w-full bg-pink-100 hover:bg-pink-200 text-pink-800 font-bold py-2 px-4 rounded-lg transition">5-4-3-2-1 Grounding</button>
                        <button data-exercise="walk" class="w-full bg-green-100 hover:bg-green-200 text-green-800 font-bold py-2 px-4 rounded-lg transition">Take a Mindful Walk</button>
                        <button data-exercise="journal" class="w-full bg-blue-100 hover:bg-blue-200 text-blue-800 font-bold py-2 px-4 rounded-lg transition">Write It Down</button>
                        <button data-exercise="cry" class="w-full bg-indigo-100 hover:bg-indigo-200 text-indigo-800 font-bold py-2 px-4 rounded-lg transition">Let It Out</button>
                    </div>
                </div>
                <button id="close-tools-modal-btn" class="mt-6 text-gray-600 hover:text-gray-800 w-full text-center">Close</button>
            </div>
            <div id="tools-exercise-view" class="hidden">
                 <h2 id="exercise-title" class="text-2xl font-bold text-gray-800 mb-4 text-center"></h2>
                 <div id="exercise-content" class="text-gray-700 space-y-4"></div>
                 <button id="back-to-tools-btn" class="mt-6 text-gray-600 hover:text-gray-800 w-full text-center">‚Üê Back to Tools</button>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const micBtn = document.getElementById('mic-btn');
        const languageSelect = document.getElementById('language-select');
        const voiceSelect = document.getElementById('voice-select');
        const callHelpBtn = document.getElementById('call-help-btn');
        const callModal = document.getElementById('call-modal');
        const closeCallModalBtn = document.getElementById('close-call-modal-btn');
        const toolsBtn = document.getElementById('tools-btn');
        const toolsModal = document.getElementById('tools-modal');
        const closeToolsModalBtn = document.getElementById('close-tools-modal-btn');
        const moodTracker = document.getElementById('mood-tracker');
        const toolsMainView = document.getElementById('tools-main-view');
        const toolsExerciseView = document.getElementById('tools-exercise-view');
        const exerciseTitle = document.getElementById('exercise-title');
        const exerciseContent = document.getElementById('exercise-content');
        const backToToolsBtn = document.getElementById('back-to-tools-btn');
        
        // --- API & State ---
        const API_KEY = ""; 
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
        let chatHistory = [];
        let voices = [];

        // --- Speech Recognition & Synthesis ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;

        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.lang = 'en-US';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
            recognition.onstart = () => micBtn.classList.add('is-recording');
            recognition.onend = () => micBtn.classList.remove('is-recording');
            recognition.onresult = (event) => userInput.value = event.results[0][0].transcript;
            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                micBtn.classList.remove('is-recording');
            };
        } else {
            console.log("Speech Recognition not supported.");
            micBtn.style.display = 'none';
        }

        function populateVoiceList() {
            voices = speechSynthesis.getVoices();
        }
        populateVoiceList();
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }

        // --- Data ---
        const crisisResponses = {
            "help": "If you are in a crisis or any other person may be in danger, please call a helpline. A number you can call in the US is 988. Please call now.",
            "suicide": "If you are having suicidal thoughts, it's important to get help right away. Please call 988 or another emergency number immediately. You are not alone and there is help available.",
            "kill myself": "I'm very concerned about what you've just said. Please, please call 988 or a local emergency number right now. There are people who want to help you.",
            "self-harm": "It sounds like you're going through a lot of pain. Please reach out for help. You can call 988 to talk to someone who can support you."
        };

        const exercises = {
            breathing: {
                title: "Box Breathing",
                content: `
                    <p>This is a simple technique to calm your nervous system.</p>
                    <ol class="list-decimal list-inside mt-2">
                        <li><strong>Inhale:</strong> Slowly breathe in through your nose for 4 seconds.</li>
                        <li><strong>Hold:</strong> Hold your breath for 4 seconds.</li>
                        <li><strong>Exhale:</strong> Slowly breathe out through your mouth for 4 seconds.</li>
                        <li><strong>Hold:</strong> Hold your breath for 4 seconds.</li>
                    </ol>
                    <p class="mt-2">Repeat this cycle for a few minutes until you feel more centered.</p>
                `
            },
            grounding: {
                title: "5-4-3-2-1 Grounding",
                content: `
                    <p>This technique helps you reconnect with the present moment.</p>
                    <p class="mt-2">Acknowledge the following around you:</p>
                    <ul class="list-disc list-inside mt-2">
                        <li><strong>5 things</strong> you can see.</li>
                        <li><strong>4 things</strong> you can touch.</li>
                        <li><strong>3 things</strong> you can hear.</li>
                        <li><strong>2 things</strong> you can smell.</li>
                        <li><strong>1 thing</strong> you can taste.</li>
                    </ul>
                     <p class="mt-2">Take your time with each sense. This helps bring you back to the present.</p>
                `
            },
            walk: {
                title: "Take a Mindful Walk",
                content: `
                    <p>Sometimes, a change of scenery is all you need. Walking can help clear your head and reduce stress.</p>
                    <ul class="list-disc list-inside mt-2">
                        <li><strong>Focus on your feet:</strong> Feel the sensation of your feet hitting the ground.</li>
                        <li><strong>Look around:</strong> Notice the colors, shapes, and movements around you without judgment.</li>
                        <li><strong>Listen:</strong> Pay attention to the sounds of nature or the city.</li>
                    </ul>
                    <p class="mt-2">You don't need a destination. Just walk and be present.</p>
                `
            },
            journal: {
                title: "Write It Down",
                content: `
                    <p>Putting your thoughts on paper can make them feel less overwhelming. It doesn't have to be perfect.</p>
                    <ul class="list-disc list-inside mt-2">
                        <li>Grab a pen and paper, or open a notes app.</li>
                        <li>Write whatever comes to mind. Don't worry about grammar or spelling.</li>
                        <li>You can write about what's bothering you, what you're grateful for, or just describe your day.</li>
                    </ul>
                    <p class="mt-2">This is a safe space for your thoughts, just for you.</p>
                `
            },
            cry: {
                title: "Let It Out",
                content: `
                    <p>Crying is a natural and healthy way to release pent-up emotions. It's a sign of strength, not weakness.</p>
                    <ul class="list-disc list-inside mt-2">
                        <li>Find a safe, private space where you feel comfortable.</li>
                        <li>Allow yourself to feel your emotions without judgment.</li>
                        <li>It's okay to cry. It can be a powerful way to process pain and start healing.</li>
                    </ul>
                    <p class="mt-2">Afterward, be gentle with yourself. Drink some water or wrap yourself in a warm blanket.</p>
                `
            }
        };

        // --- Functions ---
        function addMessage(sender, message) {
            const messageWrapper = document.createElement('div');
            messageWrapper.classList.add('flex', 'items-end', 'my-2', 'max-w-xs', 'lg:max-w-md');
            const messageElement = document.createElement('div');
            messageElement.classList.add('p-3', 'rounded-lg', 'break-words', 'shadow');
            
            if (sender === 'user') {
                messageWrapper.classList.add('self-end', 'ml-auto');
                messageElement.classList.add('bg-gradient-to-br', 'from-pink-400', 'to-purple-400', 'text-white', 'rounded-br-none');
            } else {
                messageWrapper.classList.add('self-start', 'mr-auto');
                messageElement.classList.add('bg-white', 'text-gray-800', 'rounded-bl-none');
                
                const readAloudBtn = document.createElement('button');
                readAloudBtn.innerHTML = ' ';
                readAloudBtn.classList.add('read-aloud-btn', 'ml-2');
                readAloudBtn.onclick = () => {
                    const utterance = new SpeechSynthesisUtterance(message);
                    const selectedVoice = voiceSelect.value;
                    if (selectedVoice !== 'default' && voices.length > 0) {
                        let voiceToUse;
                        if (selectedVoice === 'female') voiceToUse = voices.find(v => v.lang.startsWith('en') && v.name.includes('Female'));
                        else if (selectedVoice === 'male') voiceToUse = voices.find(v => v.lang.startsWith('en') && v.name.includes('Male'));
                        if (voiceToUse) utterance.voice = voiceToUse;
                    }
                    speechSynthesis.cancel();
                    speechSynthesis.speak(utterance);
                };
                messageWrapper.appendChild(readAloudBtn);
            }
            
            messageElement.textContent = message;
            messageWrapper.prepend(messageElement);
            chatWindow.appendChild(messageWrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function showTypingIndicator() {
            const typingElement = document.createElement('div');
            typingElement.id = 'typing-indicator';
            typingElement.classList.add('bg-white', 'text-gray-800', 'self-start', 'mr-auto', 'rounded-lg', 'max-w-xs', 'lg:max-w-md', 'shadow');
            typingElement.innerHTML = `<div class="typing-indicator"><span></span><span></span><span></span></div>`;
            chatWindow.appendChild(typingElement);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingElement = document.getElementById('typing-indicator');
            if (typingElement) chatWindow.removeChild(typingElement);
        }

        async function getGenerativeResponse(prompt) {
            const selectedLanguage = languageSelect.options[languageSelect.selectedIndex].text;
            const systemInstructionText = `You are HopeBot, a caring and empathetic mental health support companion. Your role is to listen, provide comfort, and offer gentle, supportive guidance. You are not a licensed therapist, so you must not give medical advice. If a user expresses any intent of self-harm or crisis, you must immediately provide a crisis helpline number. Be warm, understanding, and patient in your responses. The user wants to converse in ${selectedLanguage}. All your responses must be in ${selectedLanguage}.`;

            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            try {
                const payload = {
                    contents: chatHistory,
                    systemInstruction: { parts: [{ text: systemInstructionText }] },
                    safetySettings: [
                        { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                        { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    ],
                };
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                const data = await response.json();
                if (data.candidates && data.candidates.length > 0 && data.candidates[0].content.parts[0].text) {
                    const botMessage = data.candidates[0].content.parts[0].text;
                    chatHistory.push({ role: "model", parts: [{ text: botMessage }] });
                    return botMessage;
                } else {
                    return "I'm not sure how to respond to that. Could we talk about something else?";
                }
            } catch (error) {
                console.error("Error fetching from Gemini API:", error);
                return "Sorry, I'm unable to connect right now. Please try again in a moment.";
            }
        }

        async function sendMessage(messageOverride = null) {
            const message = messageOverride || userInput.value.trim();
            if (message === '') return;

            addMessage('user', message);
            if (!messageOverride) userInput.value = '';
            showTypingIndicator();

            const lowerCaseMessage = message.toLowerCase();
            let crisisDetected = false;
            for (const keyword in crisisResponses) {
                if (lowerCaseMessage.includes(keyword)) {
                    hideTypingIndicator();
                    addMessage('bot', crisisResponses[keyword]);
                    crisisDetected = true;
                    break;
                }
            }

            if (crisisDetected) return;
            
            const botResponse = await getGenerativeResponse(message);
            hideTypingIndicator();
            addMessage('bot', botResponse);
        }

        function resetChat() {
            chatWindow.innerHTML = '';
            chatHistory = [];
            const welcomeMessages = {
                en: "Hello! I'm HopeBot. I'm an AI companion here to listen and offer a supportive space. Please know I'm not a therapist, but I'm here to chat. How are you doing today?",
                es: "¬°Hola! Soy HopeBot...",
                fr: "Bonjour! Je suis HopeBot...",
                de: "Hallo! Ich bin HopeBot...",
                hi: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§π‡•ã‡§™-‡§¨‡•â‡§ü ‡§π‡•Ç‡§Å‡•§...",
                mr: "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞! ‡§Æ‡•Ä ‡§π‡•ã‡§™-‡§¨‡•â‡§ü ‡§Ü‡§π‡•á...."
            };
            const welcomeMessage = welcomeMessages[languageSelect.value] || welcomeMessages['en'];
            addMessage('bot', welcomeMessage);
            chatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
        }

        // --- Event Listeners ---
        sendBtn.addEventListener('click', () => sendMessage());
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        languageSelect.addEventListener('change', resetChat);

        if (micBtn) {
            micBtn.addEventListener('click', () => {
                if (recognition) recognition.start();
            });
        }

        // Modal Listeners
        callHelpBtn.addEventListener('click', () => callModal.classList.remove('hidden'));
        closeCallModalBtn.addEventListener('click', () => callModal.classList.add('hidden'));
        callModal.addEventListener('click', (e) => {
            if (e.target === callModal) callModal.classList.add('hidden');
        });

        toolsBtn.addEventListener('click', () => toolsModal.classList.remove('hidden'));
        closeToolsModalBtn.addEventListener('click', () => toolsModal.classList.add('hidden'));
        toolsModal.addEventListener('click', (e) => {
            if (e.target === toolsModal) {
                 toolsMainView.classList.remove('hidden');
                 toolsExerciseView.classList.add('hidden');
                 toolsModal.classList.add('hidden');
            }
        });

        // Tools Modal Logic
        moodTracker.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const mood = e.target.dataset.mood;
                sendMessage(`Today, I'm feeling ${mood}.`);
                toolsModal.classList.add('hidden');
            }
        });

        document.querySelectorAll('[data-exercise]').forEach(button => {
            button.addEventListener('click', () => {
                const exerciseKey = button.dataset.exercise;
                const exercise = exercises[exerciseKey];
                exerciseTitle.textContent = exercise.title;
                exerciseContent.innerHTML = exercise.content;
                toolsMainView.classList.add('hidden');
                toolsExerciseView.classList.remove('hidden');
            });
        });

        backToToolsBtn.addEventListener('click', () => {
            toolsMainView.classList.remove('hidden');
            toolsExerciseView.classList.add('hidden');
        });

        window.onload = () => {
             setTimeout(resetChat, 500);
        }
    </script>
</body>
</html>
 